<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Report - {{ property.address }}</title>
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Helvetica', 'Arial', sans-serif;
            font-size: 11pt;
            line-height: 1.5;
            color: #333;
        }
        
        .header {
            border-bottom: 3px solid #1a5f7a;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        
        .logo {
            font-size: 24pt;
            font-weight: bold;
            color: #1a5f7a;
        }
        
        .logo span {
            color: #ff6b35;
        }
        
        .report-date {
            font-size: 10pt;
            color: #666;
            margin-top: 5px;
        }
        
        h1 {
            font-size: 22pt;
            color: #1a5f7a;
            margin-bottom: 10px;
        }
        
        h2 {
            font-size: 16pt;
            color: #1a5f7a;
            border-bottom: 1px solid #ddd;
            padding-bottom: 8px;
            margin-top: 25px;
            margin-bottom: 15px;
        }
        
        h3 {
            font-size: 13pt;
            color: #333;
            margin-top: 15px;
            margin-bottom: 10px;
        }
        
        .property-header {
            background: linear-gradient(135deg, #1a5f7a 0%, #2d8aa9 100%);
            color: white;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 25px;
        }
        
        .property-header h1 {
            color: white;
            margin-bottom: 5px;
        }
        
        .property-address {
            font-size: 12pt;
            opacity: 0.9;
        }
        
        .price-section {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        .price-main {
            font-size: 28pt;
            font-weight: bold;
        }
        
        .price-per-sqm {
            font-size: 12pt;
            opacity: 0.85;
        }
        
        .property-type-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 11pt;
        }
        
        .details-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .detail-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #1a5f7a;
        }
        
        .detail-label {
            font-size: 9pt;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .detail-value {
            font-size: 14pt;
            font-weight: bold;
            color: #333;
            margin-top: 5px;
        }
        
        .features-list {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }
        
        .feature-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: #f0f7fa;
            border-radius: 4px;
            font-size: 10pt;
        }
        
        .feature-icon {
            color: #1a5f7a;
        }
        
        .analysis-section {
            background: #fff8f4;
            border: 1px solid #ffd9c4;
            border-radius: 8px;
            padding: 20px;
            margin-top: 25px;
        }
        
        .analysis-section h2 {
            color: #ff6b35;
            border-bottom-color: #ffd9c4;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        
        .metric-card {
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .metric-value {
            font-size: 20pt;
            font-weight: bold;
            color: #ff6b35;
        }
        
        .metric-label {
            font-size: 9pt;
            color: #666;
            margin-top: 5px;
        }
        
        .region-comparison {
            margin-top: 20px;
            padding: 15px;
            background: #f0f7fa;
            border-radius: 6px;
        }
        
        .comparison-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .comparison-row:last-child {
            border-bottom: none;
        }
        
        .description {
            background: #fafafa;
            padding: 20px;
            border-radius: 6px;
            margin-top: 20px;
            font-size: 11pt;
            line-height: 1.7;
        }
        
        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            text-align: center;
            font-size: 9pt;
            color: #666;
        }
        
        .disclaimer {
            margin-top: 10px;
            font-size: 8pt;
            color: #999;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">Atlas<span>Investor</span></div>
        <div class="report-date">Property Investment Report • {{ generated_at }}</div>
    </div>

    <div class="property-header">
        <div style="display: flex; justify-content: space-between; align-items: flex-start;">
            <div>
                <h1>{{ property_type_display }}</h1>
                <div class="property-address">{{ property.address }}</div>
                {% if region %}
                <div style="margin-top: 5px; font-size: 11pt;">{{ region.name }}, Portugal</div>
                {% endif %}
            </div>
            <div class="property-type-badge">{{ property_type_display }}</div>
        </div>
        <div class="price-section">
            <div>
                <div class="price-main">{{ price_formatted }}</div>
                <div class="price-per-sqm">{{ price_per_sqm }}</div>
            </div>
        </div>
    </div>

    <h2>Property Details</h2>
    <div class="details-grid">
        <div class="detail-card">
            <div class="detail-label">Size</div>
            <div class="detail-value">{{ property.size_sqm }} m²</div>
        </div>
        {% if property.bedrooms %}
        <div class="detail-card">
            <div class="detail-label">Bedrooms</div>
            <div class="detail-value">{{ property.bedrooms }}</div>
        </div>
        {% endif %}
        {% if property.bathrooms %}
        <div class="detail-card">
            <div class="detail-label">Bathrooms</div>
            <div class="detail-value">{{ property.bathrooms }}</div>
        </div>
        {% endif %}
        {% if property.year_built %}
        <div class="detail-card">
            <div class="detail-label">Year Built</div>
            <div class="detail-value">{{ property.year_built }}</div>
        </div>
        {% endif %}
        <div class="detail-card">
            <div class="detail-label">Condition</div>
            <div class="detail-value">{{ condition_display }}</div>
        </div>
        {% if property.energy_rating %}
        <div class="detail-card">
            <div class="detail-label">Energy Rating</div>
            <div class="detail-value">{{ property.energy_rating }}</div>
        </div>
        {% endif %}
    </div>

    <h3>Features</h3>
    <div class="features-list">
        {% if property.has_elevator %}
        <div class="feature-item">
            <span class="feature-icon">✓</span> Elevator
        </div>
        {% endif %}
        {% if property.has_balcony %}
        <div class="feature-item">
            <span class="feature-icon">✓</span> Balcony
        </div>
        {% endif %}
        {% if property.has_terrace %}
        <div class="feature-item">
            <span class="feature-icon">✓</span> Terrace
        </div>
        {% endif %}
        {% if property.parking_spaces > 0 %}
        <div class="feature-item">
            <span class="feature-icon">✓</span> {{ property.parking_spaces }} Parking Space{% if property.parking_spaces > 1 %}s{% endif %}
        </div>
        {% endif %}
        {% if property.floor_number %}
        <div class="feature-item">
            <span class="feature-icon">✓</span> Floor {{ property.floor_number }}{% if property.total_floors %} of {{ property.total_floors }}{% endif %}
        </div>
        {% endif %}
    </div>

    {% if property.description %}
    <h2>Description</h2>
    <div class="description">
        {{ property.description }}
    </div>
    {% endif %}

    {% if include_analysis %}
    <div class="analysis-section">
        <h2>Investment Analysis</h2>
        
        {% if analysis %}
        <div class="metrics-grid">
            {% if analysis.gross_yield %}
            <div class="metric-card">
                <div class="metric-value">{{ analysis.gross_yield|floatformat:2 }}%</div>
                <div class="metric-label">Gross Yield</div>
            </div>
            {% endif %}
            {% if analysis.net_yield %}
            <div class="metric-card">
                <div class="metric-value">{{ analysis.net_yield|floatformat:2 }}%</div>
                <div class="metric-label">Net Yield</div>
            </div>
            {% endif %}
            {% if analysis.monthly_cash_flow %}
            <div class="metric-card">
                <div class="metric-value">€{{ analysis.monthly_cash_flow|floatformat:0 }}</div>
                <div class="metric-label">Monthly Cash Flow</div>
            </div>
            {% endif %}
            {% if analysis.payback_years %}
            <div class="metric-card">
                <div class="metric-value">{{ analysis.payback_years|floatformat:1 }}</div>
                <div class="metric-label">Payback (Years)</div>
            </div>
            {% endif %}
        </div>
        {% endif %}

        {% if region %}
        <div class="region-comparison">
            <h3>Regional Comparison ({{ region.name }})</h3>
            <div class="comparison-row">
                <span>Average Price/m²:</span>
                <strong>€{{ region.avg_price_per_sqm|floatformat:0 }}</strong>
            </div>
            {% if region.avg_rent %}
            <div class="comparison-row">
                <span>Average Rent:</span>
                <strong>€{{ region.avg_rent|floatformat:0 }}/month</strong>
            </div>
            {% endif %}
            {% if region.avg_yield %}
            <div class="comparison-row">
                <span>Regional Yield:</span>
                <strong>{{ region.avg_yield }}%</strong>
            </div>
            {% endif %}
        </div>
        {% endif %}
    </div>
    {% endif %}

    <div class="footer">
        <div>Atlas Investor - Real Estate Investment Platform for Portugal</div>
        <div class="disclaimer">
            <strong>IMPORTANT LEGAL DISCLAIMER:</strong> This report is for informational purposes only and should not be considered financial, investment, legal, or tax advice. 
            Atlas Investor provides insights and analysis tools but offers no 100% guarantees regarding data accuracy, completeness, or investment outcomes. 
            All projections, estimates, and analyses are based on available data and assumptions that may not reflect actual market conditions or future performance. 
            Atlas Investor is not legally bound to any losses that may occur while using this platform. 
            All investment decisions are made at your own risk. You must conduct your own independent research, verification, and due diligence before making any investment decisions. 
            We recommend consulting with qualified financial, legal, and tax advisors. 
            For complete details on our liability limitations, warranties, and user responsibilities, please review our Terms of Service.
        </div>
    </div>
</body>
</html>

